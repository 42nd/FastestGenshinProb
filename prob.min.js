/*FastestGenshinProb v1.0 by 42nd*/function singleProb(e,t=[]){if(void 0!==t[e])return t[e];let $;return $=e<=72?.006:e>=89?1:.006+.06*(e-72),t[e]=$,$}function exactlyC(e,t,$,n){if(n<1||n>7)throw Error("target_C must be between 1 and 7.");let _={};function l(e,t,$){return 100n*BigInt(e)+10n*BigInt(t)+BigInt($)}let i=new Map,o=l(e,t?1:0,0n);i.set(o,1);for(let r=0;r<$;r++){let f=new Map;for(let[s,u]of i){if(u<1e-12)continue;let g=Number(s/100n),c=Number(s/10n%10n),m=Number(s%10n);if(m>n)continue;let w=singleProb(g,_),a=1-w,b=Math.min(g+1,89),C=l(b,c,m);f.set(C,(f.get(C)||0)+u*a);let d,P;if(0===c){let h=l(0,1,m);f.set(h,(f.get(h)||0)+u*w*.5),P=l(0,0,d=Math.min(m+1,n+1)),f.set(P,(f.get(P)||0)+u*w*.5)}else P=l(0,0,d=Math.min(m+1,n+1)),f.set(P,(f.get(P)||0)+u*w)}i=f}let v=0;for(let[x,y]of i){let L=Number(x%10n);L===n&&(v+=y)}return 100*v}function atLeastC(e,t,$,n){if(n<1||n>7)throw Error("target_C must be between 1 and 7.");let _={};function l(e,t,$){return 100n*BigInt(e)+10n*BigInt(t)+BigInt($)}let i=new Map,o=l(e,t?1:0,0n);i.set(o,1);let r=Math.min(Math.floor($/10),7);for(let f=0;f<$;f++){let s=new Map;for(let[u,g]of i){let c=Number(u/100n),m=Number(u/10n%10n),w=Number(u%10n);if(w>r)continue;let a=singleProb(c,_),b=1-a,C=Math.min(c+1,89),d=l(C,m,w);s.set(d,(s.get(d)||0)+g*b);let P,h;if(0===m){let v=l(0,1,w);s.set(v,(s.get(v)||0)+g*a*.5),h=l(0,0,P=Math.min(w+1,r)),s.set(h,(s.get(h)||0)+g*a*.5)}else h=l(0,0,P=Math.min(w+1,r)),s.set(h,(s.get(h)||0)+g*a)}i=s}let x=0;for(let[y,L]of i){let j=Number(y%10n);j>=n&&(x+=L)}return 100*x}
